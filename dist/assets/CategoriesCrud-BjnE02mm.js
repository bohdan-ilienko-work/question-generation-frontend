import{r as x,R,a as jt,d as _t,j as $}from"./index-JQf8uTBS.js";import{L as At,g as Bt,S as Kt}from"./index-BT9NWaBK.js";import{_ as q,w as ce,o as Ht,a as J,t as zt,b as He,c as et,m as Nt,r as Ae,u as Ie,g as Et,d as St,I as me,e as G,f as V,h as C,i as se,p as kt,j as Be,C as Ft,k as qt,l as Vt,n as Wt,q as Gt,s as P,K as Se,v as Ut,R as Xt,x as dt,y as wt,z as Yt,A as Qt,B as Qe}from"./CheckOutlined-IEi1jn8g.js";function W(n,t){return n[t]}var Jt=["children"];function $t(n,t){return"".concat(n,"-").concat(t)}function Zt(n){return n&&n.type&&n.type.isTreeNode}function Le(n,t){return n??t}function ke(n){var t=n||{},r=t.title,e=t._title,i=t.key,l=t.children,f=r||"title";return{title:f,_title:e||[f],key:i||"key",children:l||"children"}}function Dt(n){function t(r){var e=zt(r);return e.map(function(i){if(!Zt(i))return ce(!i,"Tree/TreeNode can only accept TreeNode as children."),null;var l=i.key,f=i.props,a=f.children,d=He(f,Jt),o=q({key:l},d),u=t(a);return u.length&&(o.children=u),o}).filter(function(i){return i})}return t(n)}function Ve(n,t,r){var e=ke(r),i=e._title,l=e.key,f=e.children,a=new Set(t===!0?[]:t),d=[];function o(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(g,h){for(var p=$t(c?c.pos:"0",h),b=Le(g[l],p),v,y=0;y<i.length;y+=1){var K=i[y];if(g[K]!==void 0){v=g[K];break}}var m=Object.assign(Ht(g,[].concat(J(i),[l,f])),{title:v,key:b,parent:c,pos:p,children:null,data:g,isStart:[].concat(J(c?c.isStart:[]),[h===0]),isEnd:[].concat(J(c?c.isEnd:[]),[h===u.length-1])});return d.push(m),t===!0||a.has(b)?m.children=o(g[f]||[],m):m.children=[],m})}return o(n),d}function en(n,t,r){var e={};et(r)==="object"?e=r:e={externalGetKey:r},e=e||{};var i=e,l=i.childrenPropName,f=i.externalGetKey,a=i.fieldNames,d=ke(a),o=d.key,u=d.children,c=l||u,g;f?typeof f=="string"?g=function(b){return b[f]}:typeof f=="function"&&(g=function(b){return f(b)}):g=function(b,v){return Le(b[o],v)};function h(p,b,v,y){var K=p?p[c]:n,m=p?$t(v.pos,b):"0",N=p?[].concat(J(y),[p]):[];if(p){var E=g(p,m),k={node:p,index:b,pos:m,key:E,parentPos:v.node?v.pos:null,level:v.level+1,nodes:N};t(k)}K&&K.forEach(function(D,w){h(D,w,{node:p,pos:m,level:v?v.level+1:-1},N)})}h(null)}function Ot(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.initWrapper,e=t.processEntity,i=t.onProcessFinished,l=t.externalGetKey,f=t.childrenPropName,a=t.fieldNames,d=arguments.length>2?arguments[2]:void 0,o=l||d,u={},c={},g={posEntities:u,keyEntities:c};return r&&(g=r(g)||g),en(n,function(h){var p=h.node,b=h.index,v=h.pos,y=h.key,K=h.parentPos,m=h.level,N=h.nodes,E={node:p,nodes:N,index:b,key:y,pos:v,level:m},k=Le(y,v);u[v]=E,c[k]=E,E.parent=u[K],E.parent&&(E.parent.children=E.parent.children||[],E.parent.children.push(E)),e&&e(E,g)},{externalGetKey:o,childrenPropName:f,fieldNames:a}),i&&i(g),g}function Re(n,t){var r=t.expandedKeys,e=t.selectedKeys,i=t.loadedKeys,l=t.loadingKeys,f=t.checkedKeys,a=t.halfCheckedKeys,d=t.dragOverNodeKey,o=t.dropPosition,u=t.keyEntities,c=W(u,n),g={eventKey:n,expanded:r.indexOf(n)!==-1,selected:e.indexOf(n)!==-1,loaded:i.indexOf(n)!==-1,loading:l.indexOf(n)!==-1,checked:f.indexOf(n)!==-1,halfChecked:a.indexOf(n)!==-1,pos:String(c?c.pos:""),dragOver:d===n&&o===0,dragOverGapTop:d===n&&o===-1,dragOverGapBottom:d===n&&o===1};return g}function z(n){var t=n.data,r=n.expanded,e=n.selected,i=n.checked,l=n.loaded,f=n.loading,a=n.halfChecked,d=n.dragOver,o=n.dragOverGapTop,u=n.dragOverGapBottom,c=n.pos,g=n.active,h=n.eventKey,p=q(q({},t),{},{expanded:r,selected:e,checked:i,loaded:l,loading:f,halfChecked:a,dragOver:d,dragOverGapTop:o,dragOverGapBottom:u,pos:c,active:g,key:h});return"props"in p||Object.defineProperty(p,"props",{get:function(){return ce(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),p}function Pt(n,t){var r=new Set;return n.forEach(function(e){t.has(e)||r.add(e)}),r}function tn(n){var t=n||{},r=t.disabled,e=t.disableCheckbox,i=t.checkable;return!!(r||e)||i===!1}function nn(n,t,r,e){for(var i=new Set(n),l=new Set,f=0;f<=r;f+=1){var a=t.get(f)||new Set;a.forEach(function(c){var g=c.key,h=c.node,p=c.children,b=p===void 0?[]:p;i.has(g)&&!e(h)&&b.filter(function(v){return!e(v.node)}).forEach(function(v){i.add(v.key)})})}for(var d=new Set,o=r;o>=0;o-=1){var u=t.get(o)||new Set;u.forEach(function(c){var g=c.parent,h=c.node;if(!(e(h)||!c.parent||d.has(c.parent.key))){if(e(c.parent.node)){d.add(g.key);return}var p=!0,b=!1;(g.children||[]).filter(function(v){return!e(v.node)}).forEach(function(v){var y=v.key,K=i.has(y);p&&!K&&(p=!1),!b&&(K||l.has(y))&&(b=!0)}),p&&i.add(g.key),b&&l.add(g.key),d.add(g.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(Pt(l,i))}}function an(n,t,r,e,i){for(var l=new Set(n),f=new Set(t),a=0;a<=e;a+=1){var d=r.get(a)||new Set;d.forEach(function(g){var h=g.key,p=g.node,b=g.children,v=b===void 0?[]:b;!l.has(h)&&!f.has(h)&&!i(p)&&v.filter(function(y){return!i(y.node)}).forEach(function(y){l.delete(y.key)})})}f=new Set;for(var o=new Set,u=e;u>=0;u-=1){var c=r.get(u)||new Set;c.forEach(function(g){var h=g.parent,p=g.node;if(!(i(p)||!g.parent||o.has(g.parent.key))){if(i(g.parent.node)){o.add(h.key);return}var b=!0,v=!1;(h.children||[]).filter(function(y){return!i(y.node)}).forEach(function(y){var K=y.key,m=l.has(K);b&&!m&&(b=!1),!v&&(m||f.has(K))&&(v=!0)}),b||l.delete(h.key),v&&f.add(h.key),o.add(h.key)}})}return{checkedKeys:Array.from(l),halfCheckedKeys:Array.from(Pt(f,l))}}function We(n,t,r,e){var i=[],l;l=tn;var f=new Set(n.filter(function(u){var c=!!W(r,u);return c||i.push(u),c})),a=new Map,d=0;Object.keys(r).forEach(function(u){var c=r[u],g=c.level,h=a.get(g);h||(h=new Set,a.set(g,h)),h.add(c),d=Math.max(d,g)}),ce(!i.length,"Tree missing follow keys: ".concat(i.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var o;return t===!0?o=nn(f,a,d,l):o=an(f,t.halfCheckedKeys,a,d,l),o}const rn=n=>{const{checkboxCls:t}=n,r=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},Ae(n)),{display:"inline-flex",flexWrap:"wrap",columnGap:n.marginXS,[`> ${n.antCls}-row`]:{flex:1}}),[r]:Object.assign(Object.assign({},Ae(n)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${r}`]:{marginInlineStart:0},[`&${r}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},Ae(n)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:n.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},Et(n))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:n.checkboxSize,height:n.checkboxSize,direction:"ltr",backgroundColor:n.colorBgContainer,border:`${Ie(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,borderCollapse:"separate",transition:`all ${n.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:n.calc(n.checkboxSize).div(14).mul(5).equal(),height:n.calc(n.checkboxSize).div(14).mul(8).equal(),border:`${Ie(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`}},"& + span":{paddingInlineStart:n.paddingXS,paddingInlineEnd:n.paddingXS}})},{[`
        ${r}:not(${r}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:n.colorPrimary}},[`${r}:not(${r}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:n.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:n.colorPrimary,borderColor:n.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`}}},[`
        ${r}-checked:not(${r}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:n.calc(n.fontSizeLG).div(2).equal(),height:n.calc(n.fontSizeLG).div(2).equal(),backgroundColor:n.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorPrimary} !important`}}}},{[`${r}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:n.colorBgContainerDisabled,borderColor:n.colorBorder,"&:after":{borderColor:n.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:n.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:n.colorTextDisabled}}}]};function Tt(n,t){const r=Nt(t,{checkboxCls:`.${n}`,checkboxSize:t.controlInteractiveSize});return[rn(r)]}St("Checkbox",(n,t)=>{let{prefixCls:r}=t;return[Tt(r,n)]});var on={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},dn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:on}))},ln=x.forwardRef(dn),sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},cn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:sn}))},Rt=x.forwardRef(cn),un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},fn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:un}))},vn=x.forwardRef(fn),gn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},hn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:gn}))},pn=x.forwardRef(hn),yn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},mn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:yn}))},bn=x.forwardRef(mn),xn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Cn=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:xn}))},Kn=x.forwardRef(Cn),Nn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},En=function(t,r){return x.createElement(me,G({},t,{ref:r,icon:Nn}))},Sn=x.forwardRef(En),tt=x.createContext(null),kn=x.createContext({}),wn=function(t){for(var r=t.prefixCls,e=t.level,i=t.isStart,l=t.isEnd,f="".concat(r,"-indent-unit"),a=[],d=0;d<e;d+=1)a.push(x.createElement("span",{key:d,className:V(f,C(C({},"".concat(f,"-start"),i[d]),"".concat(f,"-end"),l[d]))}));return x.createElement("span",{"aria-hidden":"true",className:"".concat(r,"-indent")},a)};const $n=x.memo(wn);var Dn=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],lt="open",st="close",On="---",Me=function(t){var r,e,i,l=t.eventKey,f=t.className,a=t.style,d=t.dragOver,o=t.dragOverGapTop,u=t.dragOverGapBottom,c=t.isLeaf,g=t.isStart,h=t.isEnd,p=t.expanded,b=t.selected,v=t.checked,y=t.halfChecked,K=t.loading,m=t.domRef,N=t.active,E=t.data,k=t.onMouseMove,D=t.selectable,w=He(t,Dn),s=R.useContext(tt),O=R.useContext(kn),M=R.useRef(null),L=R.useState(!1),A=se(L,2),T=A[0],I=A[1],_=!!(s.disabled||t.disabled||(r=O.nodeDisabled)!==null&&r!==void 0&&r.call(O,E)),H=R.useMemo(function(){return!s.checkable||t.checkable===!1?!1:s.checkable},[s.checkable,t.checkable]),ne=function(S){_||s.onNodeSelect(S,z(t))},ae=function(S){_||!H||t.disableCheckbox||s.onNodeCheck(S,z(t),!v)},F=R.useMemo(function(){return typeof D=="boolean"?D:s.selectable},[D,s.selectable]),be=function(S){s.onNodeClick(S,z(t)),F?ne(S):ae(S)},ue=function(S){s.onNodeDoubleClick(S,z(t))},X=function(S){s.onNodeMouseEnter(S,z(t))},fe=function(S){s.onNodeMouseLeave(S,z(t))},xe=function(S){s.onNodeContextMenu(S,z(t))},U=R.useMemo(function(){return!!(s.draggable&&(!s.draggable.nodeDraggable||s.draggable.nodeDraggable(E)))},[s.draggable,E]),we=function(S){S.stopPropagation(),I(!0),s.onNodeDragStart(S,t);try{S.dataTransfer.setData("text/plain","")}catch{}},re=function(S){S.preventDefault(),S.stopPropagation(),s.onNodeDragEnter(S,t)},$e=function(S){S.preventDefault(),S.stopPropagation(),s.onNodeDragOver(S,t)},Ce=function(S){S.stopPropagation(),s.onNodeDragLeave(S,t)},oe=function(S){S.stopPropagation(),I(!1),s.onNodeDragEnd(S,t)},ve=function(S){S.preventDefault(),S.stopPropagation(),I(!1),s.onNodeDrop(S,t)},ze=function(S){K||s.onNodeExpand(S,z(t))},Ke=R.useMemo(function(){var j=W(s.keyEntities,l)||{},S=j.children;return!!(S||[]).length},[s.keyEntities,l]),ie=R.useMemo(function(){return c===!1?!1:c||!s.loadData&&!Ke||s.loadData&&t.loaded&&!Ke},[c,s.loadData,Ke,t.loaded]);R.useEffect(function(){K||typeof s.loadData=="function"&&p&&!ie&&!t.loaded&&s.onNodeLoad(z(t))},[K,s.loadData,s.onNodeLoad,p,ie,t]);var De=R.useMemo(function(){var j;return(j=s.draggable)!==null&&j!==void 0&&j.icon?R.createElement("span",{className:"".concat(s.prefixCls,"-draggable-icon")},s.draggable.icon):null},[s.draggable]),Oe=function(S){var Q=t.switcherIcon||s.switcherIcon;return typeof Q=="function"?Q(q(q({},t),{},{isLeaf:S})):Q},Pe=function(){if(ie){var S=Oe(!0);return S!==!1?R.createElement("span",{className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher-noop"))},S):null}var Q=Oe(!1);return Q!==!1?R.createElement("span",{onClick:ze,className:V("".concat(s.prefixCls,"-switcher"),"".concat(s.prefixCls,"-switcher_").concat(p?lt:st))},Q):null},Fe=R.useMemo(function(){if(!H)return null;var j=typeof H!="boolean"?H:null;return R.createElement("span",{className:V("".concat(s.prefixCls,"-checkbox"),C(C(C({},"".concat(s.prefixCls,"-checkbox-checked"),v),"".concat(s.prefixCls,"-checkbox-indeterminate"),!v&&y),"".concat(s.prefixCls,"-checkbox-disabled"),_||t.disableCheckbox)),onClick:ae,role:"checkbox","aria-checked":y?"mixed":v,"aria-disabled":_||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},j)},[H,v,y,_,t.disableCheckbox,t.title]),ge=R.useMemo(function(){return ie?null:p?lt:st},[ie,p]),B=R.useMemo(function(){return R.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__").concat(ge||"docu"),C({},"".concat(s.prefixCls,"-icon_loading"),K))})},[s.prefixCls,ge,K]),Y=R.useMemo(function(){var j=!!s.draggable,S=!t.disabled&&j&&s.dragOverNodeKey===l;return S?s.dropIndicatorRender({dropPosition:s.dropPosition,dropLevelOffset:s.dropLevelOffset,indent:s.indent,prefixCls:s.prefixCls,direction:s.direction}):null},[s.dropPosition,s.dropLevelOffset,s.indent,s.prefixCls,s.direction,s.draggable,s.dragOverNodeKey,s.dropIndicatorRender]),Z=R.useMemo(function(){var j=t.title,S=j===void 0?On:j,Q="".concat(s.prefixCls,"-node-content-wrapper"),qe;if(s.showIcon){var je=t.icon||s.icon;qe=je?R.createElement("span",{className:V("".concat(s.prefixCls,"-iconEle"),"".concat(s.prefixCls,"-icon__customize"))},typeof je=="function"?je(t):je):B}else s.loadData&&K&&(qe=B);var _e;return typeof S=="function"?_e=S(E):s.titleRender?_e=s.titleRender(E):_e=S,R.createElement("span",{ref:M,title:typeof S=="string"?S:"",className:V(Q,"".concat(Q,"-").concat(ge||"normal"),C({},"".concat(s.prefixCls,"-node-selected"),!_&&(b||T))),onMouseEnter:X,onMouseLeave:fe,onContextMenu:xe,onClick:be,onDoubleClick:ue},qe,R.createElement("span",{className:"".concat(s.prefixCls,"-title")},_e),Y)},[s.prefixCls,s.showIcon,t,s.icon,B,s.titleRender,E,ge,X,fe,xe,be,ue]),Ne=kt(w,{aria:!0,data:!0}),he=W(s.keyEntities,l)||{},Te=he.level,Ee=h[h.length-1],de=!_&&U,pe=s.draggingNodeKey===l,it=D!==void 0?{"aria-selected":!!D}:void 0;return R.createElement("div",G({ref:m,role:"treeitem","aria-expanded":c?void 0:p,className:V(f,"".concat(s.prefixCls,"-treenode"),(i={},C(C(C(C(C(C(C(C(C(C(i,"".concat(s.prefixCls,"-treenode-disabled"),_),"".concat(s.prefixCls,"-treenode-switcher-").concat(p?"open":"close"),!c),"".concat(s.prefixCls,"-treenode-checkbox-checked"),v),"".concat(s.prefixCls,"-treenode-checkbox-indeterminate"),y),"".concat(s.prefixCls,"-treenode-selected"),b),"".concat(s.prefixCls,"-treenode-loading"),K),"".concat(s.prefixCls,"-treenode-active"),N),"".concat(s.prefixCls,"-treenode-leaf-last"),Ee),"".concat(s.prefixCls,"-treenode-draggable"),U),"dragging",pe),C(C(C(C(C(C(C(i,"drop-target",s.dropTargetKey===l),"drop-container",s.dropContainerKey===l),"drag-over",!_&&d),"drag-over-gap-top",!_&&o),"drag-over-gap-bottom",!_&&u),"filter-node",(e=s.filterTreeNode)===null||e===void 0?void 0:e.call(s,z(t))),"".concat(s.prefixCls,"-treenode-leaf"),ie))),style:a,draggable:de,onDragStart:de?we:void 0,onDragEnter:U?re:void 0,onDragOver:U?$e:void 0,onDragLeave:U?Ce:void 0,onDrop:U?ve:void 0,onDragEnd:U?oe:void 0,onMouseMove:k},it,Ne),R.createElement($n,{prefixCls:s.prefixCls,level:Te,isStart:g,isEnd:h}),De,Pe(),Fe,Z)};Me.isTreeNode=1;function ee(n,t){if(!n)return[];var r=n.slice(),e=r.indexOf(t);return e>=0&&r.splice(e,1),r}function le(n,t){var r=(n||[]).slice();return r.indexOf(t)===-1&&r.push(t),r}function nt(n){return n.split("-")}function Pn(n,t){var r=[],e=W(t,n);function i(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];l.forEach(function(f){var a=f.key,d=f.children;r.push(a),i(d)})}return i(e.children),r}function Tn(n){if(n.parent){var t=nt(n.pos);return Number(t[t.length-1])===n.parent.children.length-1}return!1}function Rn(n){var t=nt(n.pos);return Number(t[t.length-1])===0}function ct(n,t,r,e,i,l,f,a,d,o){var u,c=n.clientX,g=n.clientY,h=n.target.getBoundingClientRect(),p=h.top,b=h.height,v=(o==="rtl"?-1:1)*(((i==null?void 0:i.x)||0)-c),y=(v-12)/e,K=d.filter(function(_){var H;return(H=a[_])===null||H===void 0||(H=H.children)===null||H===void 0?void 0:H.length}),m=W(a,r.eventKey);if(g<p+b/2){var N=f.findIndex(function(_){return _.key===m.key}),E=N<=0?0:N-1,k=f[E].key;m=W(a,k)}var D=m.key,w=m,s=m.key,O=0,M=0;if(!K.includes(D))for(var L=0;L<y&&Tn(m);L+=1)m=m.parent,M+=1;var A=t.data,T=m.node,I=!0;return Rn(m)&&m.level===0&&g<p+b/2&&l({dragNode:A,dropNode:T,dropPosition:-1})&&m.key===r.eventKey?O=-1:(w.children||[]).length&&K.includes(s)?l({dragNode:A,dropNode:T,dropPosition:0})?O=0:I=!1:M===0?y>-1.5?l({dragNode:A,dropNode:T,dropPosition:1})?O=1:I=!1:l({dragNode:A,dropNode:T,dropPosition:0})?O=0:l({dragNode:A,dropNode:T,dropPosition:1})?O=1:I=!1:l({dragNode:A,dropNode:T,dropPosition:1})?O=1:I=!1,{dropPosition:O,dropLevelOffset:M,dropTargetKey:m.key,dropTargetPos:m.pos,dragOverNodeKey:s,dropContainerKey:O===0?null:((u=m.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:I}}function ut(n,t){if(n){var r=t.multiple;return r?n.slice():n.length?[n[0]]:n}}function Ge(n){if(!n)return null;var t;if(Array.isArray(n))t={checkedKeys:n,halfCheckedKeys:void 0};else if(et(n)==="object")t={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return ce(!1,"`checkedKeys` is not an array or an object"),null;return t}function Je(n,t){var r=new Set;function e(i){if(!r.has(i)){var l=W(t,i);if(l){r.add(i);var f=l.parent,a=l.node;a.disabled||f&&e(f.key)}}}return(n||[]).forEach(function(i){e(i)}),J(r)}var In=function(t){var r=t.dropPosition,e=t.dropLevelOffset,i=t.indent,l={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case-1:l.top=0,l.left=-e*i;break;case 1:l.bottom=0,l.left=-e*i;break;case 0:l.bottom=0,l.left=i;break}return R.createElement("div",{style:l})};function It(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function Mn(n,t){var r=x.useState(!1),e=se(r,2),i=e[0],l=e[1];Be(function(){if(i)return n(),function(){t()}},[i]),Be(function(){return l(!0),function(){l(!1)}},[])}var Ln=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],jn=x.forwardRef(function(n,t){var r=n.className,e=n.style,i=n.motion,l=n.motionNodes,f=n.motionType,a=n.onMotionStart,d=n.onMotionEnd,o=n.active,u=n.treeNodeRequiredProps,c=He(n,Ln),g=x.useState(!0),h=se(g,2),p=h[0],b=h[1],v=x.useContext(tt),y=v.prefixCls,K=l&&f!=="hide";Be(function(){l&&K!==p&&b(K)},[l]);var m=function(){l&&a()},N=x.useRef(!1),E=function(){l&&!N.current&&(N.current=!0,d())};Mn(m,E);var k=function(w){K===w&&E()};return l?x.createElement(Ft,G({ref:t,visible:p},i,{motionAppear:f==="show",onVisibleChanged:k}),function(D,w){var s=D.className,O=D.style;return x.createElement("div",{ref:w,className:V("".concat(y,"-treenode-motion"),s),style:O},l.map(function(M){var L=Object.assign({},(It(M.data),M.data)),A=M.title,T=M.key,I=M.isStart,_=M.isEnd;delete L.children;var H=Re(T,u);return x.createElement(Me,G({},L,H,{title:A,active:o,data:M.data,key:T,isStart:I,isEnd:_}))}))}):x.createElement(Me,G({domRef:t,className:r,style:e},c,{active:o}))});function _n(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n.length,e=t.length;if(Math.abs(r-e)!==1)return{add:!1,key:null};function i(l,f){var a=new Map;l.forEach(function(o){a.set(o,!0)});var d=f.filter(function(o){return!a.has(o)});return d.length===1?d[0]:null}return r<e?{add:!0,key:i(n,t)}:{add:!1,key:i(t,n)}}function ft(n,t,r){var e=n.findIndex(function(a){return a.key===r}),i=n[e+1],l=t.findIndex(function(a){return a.key===r});if(i){var f=t.findIndex(function(a){return a.key===i.key});return t.slice(l+1,f)}return t.slice(l+1)}var An=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],vt={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Bn=function(){},ye="RC_TREE_MOTION_".concat(Math.random()),Ze={key:ye},Mt={key:ye,level:0,index:0,pos:"0",node:Ze,nodes:[Ze]},gt={parent:null,children:[],pos:Mt.pos,data:Ze,title:null,key:ye,isStart:[],isEnd:[]};function ht(n,t,r,e){return t===!1||!r?n:n.slice(0,Math.ceil(r/e)+1)}function pt(n){var t=n.key,r=n.pos;return Le(t,r)}function Hn(n){for(var t=String(n.data.key),r=n;r.parent;)r=r.parent,t="".concat(r.data.key," > ").concat(t);return t}var zn=x.forwardRef(function(n,t){var r=n.prefixCls,e=n.data;n.selectable,n.checkable;var i=n.expandedKeys,l=n.selectedKeys,f=n.checkedKeys,a=n.loadedKeys,d=n.loadingKeys,o=n.halfCheckedKeys,u=n.keyEntities,c=n.disabled,g=n.dragging,h=n.dragOverNodeKey,p=n.dropPosition,b=n.motion,v=n.height,y=n.itemHeight,K=n.virtual,m=n.scrollWidth,N=n.focusable,E=n.activeItem,k=n.focused,D=n.tabIndex,w=n.onKeyDown,s=n.onFocus,O=n.onBlur,M=n.onActiveChange,L=n.onListChangeStart,A=n.onListChangeEnd,T=He(n,An),I=x.useRef(null),_=x.useRef(null);x.useImperativeHandle(t,function(){return{scrollTo:function(Y){I.current.scrollTo(Y)},getIndentWidth:function(){return _.current.offsetWidth}}});var H=x.useState(i),ne=se(H,2),ae=ne[0],F=ne[1],be=x.useState(e),ue=se(be,2),X=ue[0],fe=ue[1],xe=x.useState(e),U=se(xe,2),we=U[0],re=U[1],$e=x.useState([]),Ce=se($e,2),oe=Ce[0],ve=Ce[1],ze=x.useState(null),Ke=se(ze,2),ie=Ke[0],De=Ke[1],Oe=x.useRef(e);Oe.current=e;function Pe(){var B=Oe.current;fe(B),re(B),ve([]),De(null),A()}Be(function(){F(i);var B=_n(ae,i);if(B.key!==null)if(B.add){var Y=X.findIndex(function(de){var pe=de.key;return pe===B.key}),Z=ht(ft(X,e,B.key),K,v,y),Ne=X.slice();Ne.splice(Y+1,0,gt),re(Ne),ve(Z),De("show")}else{var he=e.findIndex(function(de){var pe=de.key;return pe===B.key}),Te=ht(ft(e,X,B.key),K,v,y),Ee=e.slice();Ee.splice(he+1,0,gt),re(Ee),ve(Te),De("hide")}else X!==e&&(fe(e),re(e))},[i,e]),x.useEffect(function(){g||Pe()},[g]);var Fe=b?we:e,ge={expandedKeys:i,selectedKeys:l,loadedKeys:a,loadingKeys:d,checkedKeys:f,halfCheckedKeys:o,dragOverNodeKey:h,dropPosition:p,keyEntities:u};return x.createElement(x.Fragment,null,k&&E&&x.createElement("span",{style:vt,"aria-live":"assertive"},Hn(E)),x.createElement("div",null,x.createElement("input",{style:vt,disabled:N===!1||c,tabIndex:N!==!1?D:null,onKeyDown:w,onFocus:s,onBlur:O,value:"",onChange:Bn,"aria-label":"for screen reader"})),x.createElement("div",{className:"".concat(r,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},x.createElement("div",{className:"".concat(r,"-indent")},x.createElement("div",{ref:_,className:"".concat(r,"-indent-unit")}))),x.createElement(At,G({},T,{data:Fe,itemKey:pt,height:v,fullHeight:!1,virtual:K,itemHeight:y,scrollWidth:m,prefixCls:"".concat(r,"-list"),ref:I,role:"tree",onVisibleChange:function(Y){Y.every(function(Z){return pt(Z)!==ye})&&Pe()}}),function(B){var Y=B.pos,Z=Object.assign({},(It(B.data),B.data)),Ne=B.title,he=B.key,Te=B.isStart,Ee=B.isEnd,de=Le(he,Y);delete Z.key,delete Z.children;var pe=Re(de,ge);return x.createElement(jn,G({},Z,pe,{title:Ne,active:!!E&&he===E.key,pos:Y,data:B.data,isStart:Te,isEnd:Ee,motion:b,motionNodes:he===ye?oe:null,motionType:ie,onMotionStart:L,onMotionEnd:Pe,treeNodeRequiredProps:ge,onMouseMove:function(){M(null)}}))}))}),Fn=10,at=function(n){qt(r,n);var t=Vt(r);function r(){var e;Gt(this,r);for(var i=arguments.length,l=new Array(i),f=0;f<i;f++)l[f]=arguments[f];return e=t.call.apply(t,[this].concat(l)),C(P(e),"destroyed",!1),C(P(e),"delayedDragEnterLogic",void 0),C(P(e),"loadingRetryTimes",{}),C(P(e),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:ke()}),C(P(e),"dragStartMousePosition",null),C(P(e),"dragNodeProps",null),C(P(e),"currentMouseOverDroppableNodeKey",null),C(P(e),"listRef",x.createRef()),C(P(e),"onNodeDragStart",function(a,d){var o=e.state,u=o.expandedKeys,c=o.keyEntities,g=e.props.onDragStart,h=d.eventKey;e.dragNodeProps=d,e.dragStartMousePosition={x:a.clientX,y:a.clientY};var p=ee(u,h);e.setState({draggingNodeKey:h,dragChildrenKeys:Pn(h,c),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(p),window.addEventListener("dragend",e.onWindowDragEnd),g==null||g({event:a,node:z(d)})}),C(P(e),"onNodeDragEnter",function(a,d){var o=e.state,u=o.expandedKeys,c=o.keyEntities,g=o.dragChildrenKeys,h=o.flattenNodes,p=o.indent,b=e.props,v=b.onDragEnter,y=b.onExpand,K=b.allowDrop,m=b.direction,N=d.pos,E=d.eventKey;if(e.currentMouseOverDroppableNodeKey!==E&&(e.currentMouseOverDroppableNodeKey=E),!e.dragNodeProps){e.resetDragState();return}var k=ct(a,e.dragNodeProps,d,p,e.dragStartMousePosition,K,h,c,u,m),D=k.dropPosition,w=k.dropLevelOffset,s=k.dropTargetKey,O=k.dropContainerKey,M=k.dropTargetPos,L=k.dropAllowed,A=k.dragOverNodeKey;if(g.includes(s)||!L){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(T){clearTimeout(e.delayedDragEnterLogic[T])}),e.dragNodeProps.eventKey!==d.eventKey&&(a.persist(),e.delayedDragEnterLogic[N]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var T=J(u),I=W(c,d.eventKey);I&&(I.children||[]).length&&(T=le(u,d.eventKey)),e.props.hasOwnProperty("expandedKeys")||e.setExpandedKeys(T),y==null||y(T,{node:z(d),expanded:!0,nativeEvent:a.nativeEvent})}},800)),e.dragNodeProps.eventKey===s&&w===0){e.resetDragState();return}e.setState({dragOverNodeKey:A,dropPosition:D,dropLevelOffset:w,dropTargetKey:s,dropContainerKey:O,dropTargetPos:M,dropAllowed:L}),v==null||v({event:a,node:z(d),expandedKeys:u})}),C(P(e),"onNodeDragOver",function(a,d){var o=e.state,u=o.dragChildrenKeys,c=o.flattenNodes,g=o.keyEntities,h=o.expandedKeys,p=o.indent,b=e.props,v=b.onDragOver,y=b.allowDrop,K=b.direction;if(e.dragNodeProps){var m=ct(a,e.dragNodeProps,d,p,e.dragStartMousePosition,y,c,g,h,K),N=m.dropPosition,E=m.dropLevelOffset,k=m.dropTargetKey,D=m.dropContainerKey,w=m.dropTargetPos,s=m.dropAllowed,O=m.dragOverNodeKey;u.includes(k)||!s||(e.dragNodeProps.eventKey===k&&E===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():N===e.state.dropPosition&&E===e.state.dropLevelOffset&&k===e.state.dropTargetKey&&D===e.state.dropContainerKey&&w===e.state.dropTargetPos&&s===e.state.dropAllowed&&O===e.state.dragOverNodeKey||e.setState({dropPosition:N,dropLevelOffset:E,dropTargetKey:k,dropContainerKey:D,dropTargetPos:w,dropAllowed:s,dragOverNodeKey:O}),v==null||v({event:a,node:z(d)}))}}),C(P(e),"onNodeDragLeave",function(a,d){e.currentMouseOverDroppableNodeKey===d.eventKey&&!a.currentTarget.contains(a.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var o=e.props.onDragLeave;o==null||o({event:a,node:z(d)})}),C(P(e),"onWindowDragEnd",function(a){e.onNodeDragEnd(a,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)}),C(P(e),"onNodeDragEnd",function(a,d){var o=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),o==null||o({event:a,node:z(d)}),e.dragNodeProps=null,window.removeEventListener("dragend",e.onWindowDragEnd)}),C(P(e),"onNodeDrop",function(a,d){var o,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=e.state,g=c.dragChildrenKeys,h=c.dropPosition,p=c.dropTargetKey,b=c.dropTargetPos,v=c.dropAllowed;if(v){var y=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),p!==null){var K=q(q({},Re(p,e.getTreeNodeRequiredProps())),{},{active:((o=e.getActiveItem())===null||o===void 0?void 0:o.key)===p,data:W(e.state.keyEntities,p).node}),m=g.includes(p);ce(!m,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var N=nt(b),E={event:a,node:z(K),dragNode:e.dragNodeProps?z(e.dragNodeProps):null,dragNodesKeys:[e.dragNodeProps.eventKey].concat(g),dropToGap:h!==0,dropPosition:h+Number(N[N.length-1])};u||y==null||y(E),e.dragNodeProps=null}}}),C(P(e),"cleanDragState",function(){var a=e.state.draggingNodeKey;a!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null}),C(P(e),"triggerExpandActionExpand",function(a,d){var o=e.state,u=o.expandedKeys,c=o.flattenNodes,g=d.expanded,h=d.key,p=d.isLeaf;if(!(p||a.shiftKey||a.metaKey||a.ctrlKey)){var b=c.filter(function(y){return y.key===h})[0],v=z(q(q({},Re(h,e.getTreeNodeRequiredProps())),{},{data:b.data}));e.setExpandedKeys(g?ee(u,h):le(u,h)),e.onNodeExpand(a,v)}}),C(P(e),"onNodeClick",function(a,d){var o=e.props,u=o.onClick,c=o.expandAction;c==="click"&&e.triggerExpandActionExpand(a,d),u==null||u(a,d)}),C(P(e),"onNodeDoubleClick",function(a,d){var o=e.props,u=o.onDoubleClick,c=o.expandAction;c==="doubleClick"&&e.triggerExpandActionExpand(a,d),u==null||u(a,d)}),C(P(e),"onNodeSelect",function(a,d){var o=e.state.selectedKeys,u=e.state,c=u.keyEntities,g=u.fieldNames,h=e.props,p=h.onSelect,b=h.multiple,v=d.selected,y=d[g.key],K=!v;K?b?o=le(o,y):o=[y]:o=ee(o,y);var m=o.map(function(N){var E=W(c,N);return E?E.node:null}).filter(Boolean);e.setUncontrolledState({selectedKeys:o}),p==null||p(o,{event:"select",selected:K,node:d,selectedNodes:m,nativeEvent:a.nativeEvent})}),C(P(e),"onNodeCheck",function(a,d,o){var u=e.state,c=u.keyEntities,g=u.checkedKeys,h=u.halfCheckedKeys,p=e.props,b=p.checkStrictly,v=p.onCheck,y=d.key,K,m={event:"check",node:d,checked:o,nativeEvent:a.nativeEvent};if(b){var N=o?le(g,y):ee(g,y),E=ee(h,y);K={checked:N,halfChecked:E},m.checkedNodes=N.map(function(M){return W(c,M)}).filter(Boolean).map(function(M){return M.node}),e.setUncontrolledState({checkedKeys:N})}else{var k=We([].concat(J(g),[y]),!0,c),D=k.checkedKeys,w=k.halfCheckedKeys;if(!o){var s=new Set(D);s.delete(y);var O=We(Array.from(s),{halfCheckedKeys:w},c);D=O.checkedKeys,w=O.halfCheckedKeys}K=D,m.checkedNodes=[],m.checkedNodesPositions=[],m.halfCheckedKeys=w,D.forEach(function(M){var L=W(c,M);if(L){var A=L.node,T=L.pos;m.checkedNodes.push(A),m.checkedNodesPositions.push({node:A,pos:T})}}),e.setUncontrolledState({checkedKeys:D},!1,{halfCheckedKeys:w})}v==null||v(K,m)}),C(P(e),"onNodeLoad",function(a){var d,o=a.key,u=e.state.keyEntities,c=W(u,o);if(!(c!=null&&(d=c.children)!==null&&d!==void 0&&d.length)){var g=new Promise(function(h,p){e.setState(function(b){var v=b.loadedKeys,y=v===void 0?[]:v,K=b.loadingKeys,m=K===void 0?[]:K,N=e.props,E=N.loadData,k=N.onLoad;if(!E||y.includes(o)||m.includes(o))return null;var D=E(a);return D.then(function(){var w=e.state.loadedKeys,s=le(w,o);k==null||k(s,{event:"load",node:a}),e.setUncontrolledState({loadedKeys:s}),e.setState(function(O){return{loadingKeys:ee(O.loadingKeys,o)}}),h()}).catch(function(w){if(e.setState(function(O){return{loadingKeys:ee(O.loadingKeys,o)}}),e.loadingRetryTimes[o]=(e.loadingRetryTimes[o]||0)+1,e.loadingRetryTimes[o]>=Fn){var s=e.state.loadedKeys;ce(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:le(s,o)}),h()}p(w)}),{loadingKeys:le(m,o)}})});return g.catch(function(){}),g}}),C(P(e),"onNodeMouseEnter",function(a,d){var o=e.props.onMouseEnter;o==null||o({event:a,node:d})}),C(P(e),"onNodeMouseLeave",function(a,d){var o=e.props.onMouseLeave;o==null||o({event:a,node:d})}),C(P(e),"onNodeContextMenu",function(a,d){var o=e.props.onRightClick;o&&(a.preventDefault(),o({event:a,node:d}))}),C(P(e),"onFocus",function(){var a=e.props.onFocus;e.setState({focused:!0});for(var d=arguments.length,o=new Array(d),u=0;u<d;u++)o[u]=arguments[u];a==null||a.apply(void 0,o)}),C(P(e),"onBlur",function(){var a=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var d=arguments.length,o=new Array(d),u=0;u<d;u++)o[u]=arguments[u];a==null||a.apply(void 0,o)}),C(P(e),"getTreeNodeRequiredProps",function(){var a=e.state,d=a.expandedKeys,o=a.selectedKeys,u=a.loadedKeys,c=a.loadingKeys,g=a.checkedKeys,h=a.halfCheckedKeys,p=a.dragOverNodeKey,b=a.dropPosition,v=a.keyEntities;return{expandedKeys:d||[],selectedKeys:o||[],loadedKeys:u||[],loadingKeys:c||[],checkedKeys:g||[],halfCheckedKeys:h||[],dragOverNodeKey:p,dropPosition:b,keyEntities:v}}),C(P(e),"setExpandedKeys",function(a){var d=e.state,o=d.treeData,u=d.fieldNames,c=Ve(o,a,u);e.setUncontrolledState({expandedKeys:a,flattenNodes:c},!0)}),C(P(e),"onNodeExpand",function(a,d){var o=e.state.expandedKeys,u=e.state,c=u.listChanging,g=u.fieldNames,h=e.props,p=h.onExpand,b=h.loadData,v=d.expanded,y=d[g.key];if(!c){var K=o.includes(y),m=!v;if(ce(v&&K||!v&&!K,"Expand state not sync with index check"),o=m?le(o,y):ee(o,y),e.setExpandedKeys(o),p==null||p(o,{node:d,expanded:m,nativeEvent:a.nativeEvent}),m&&b){var N=e.onNodeLoad(d);N&&N.then(function(){var E=Ve(e.state.treeData,o,g);e.setUncontrolledState({flattenNodes:E})}).catch(function(){var E=e.state.expandedKeys,k=ee(E,y);e.setExpandedKeys(k)})}}}),C(P(e),"onListChangeStart",function(){e.setUncontrolledState({listChanging:!0})}),C(P(e),"onListChangeEnd",function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})}),C(P(e),"onActiveChange",function(a){var d=e.state.activeKey,o=e.props,u=o.onActiveChange,c=o.itemScrollOffset,g=c===void 0?0:c;d!==a&&(e.setState({activeKey:a}),a!==null&&e.scrollTo({key:a,offset:g}),u==null||u(a))}),C(P(e),"getActiveItem",function(){var a=e.state,d=a.activeKey,o=a.flattenNodes;return d===null?null:o.find(function(u){var c=u.key;return c===d})||null}),C(P(e),"offsetActiveKey",function(a){var d=e.state,o=d.flattenNodes,u=d.activeKey,c=o.findIndex(function(p){var b=p.key;return b===u});c===-1&&a<0&&(c=o.length),c=(c+a+o.length)%o.length;var g=o[c];if(g){var h=g.key;e.onActiveChange(h)}else e.onActiveChange(null)}),C(P(e),"onKeyDown",function(a){var d=e.state,o=d.activeKey,u=d.expandedKeys,c=d.checkedKeys,g=d.fieldNames,h=e.props,p=h.onKeyDown,b=h.checkable,v=h.selectable;switch(a.which){case Se.UP:{e.offsetActiveKey(-1),a.preventDefault();break}case Se.DOWN:{e.offsetActiveKey(1),a.preventDefault();break}}var y=e.getActiveItem();if(y&&y.data){var K=e.getTreeNodeRequiredProps(),m=y.data.isLeaf===!1||!!(y.data[g.children]||[]).length,N=z(q(q({},Re(o,K)),{},{data:y.data,active:!0}));switch(a.which){case Se.LEFT:{m&&u.includes(o)?e.onNodeExpand({},N):y.parent&&e.onActiveChange(y.parent.key),a.preventDefault();break}case Se.RIGHT:{m&&!u.includes(o)?e.onNodeExpand({},N):y.children&&y.children.length&&e.onActiveChange(y.children[0].key),a.preventDefault();break}case Se.ENTER:case Se.SPACE:{b&&!N.disabled&&N.checkable!==!1&&!N.disableCheckbox?e.onNodeCheck({},N,!c.includes(o)):!b&&v&&!N.disabled&&N.selectable!==!1&&e.onNodeSelect({},N);break}}}p==null||p(a)}),C(P(e),"setUncontrolledState",function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var u=!1,c=!0,g={};Object.keys(a).forEach(function(h){if(e.props.hasOwnProperty(h)){c=!1;return}u=!0,g[h]=a[h]}),u&&(!d||c)&&e.setState(q(q({},g),o))}}),C(P(e),"scrollTo",function(a){e.listRef.current.scrollTo(a)}),e}return Wt(r,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var i=this.props,l=i.activeKey,f=i.itemScrollOffset,a=f===void 0?0:f;l!==void 0&&l!==this.state.activeKey&&(this.setState({activeKey:l}),l!==null&&this.scrollTo({key:l,offset:a}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var i=this.state,l=i.focused,f=i.flattenNodes,a=i.keyEntities,d=i.draggingNodeKey,o=i.activeKey,u=i.dropLevelOffset,c=i.dropContainerKey,g=i.dropTargetKey,h=i.dropPosition,p=i.dragOverNodeKey,b=i.indent,v=this.props,y=v.prefixCls,K=v.className,m=v.style,N=v.showLine,E=v.focusable,k=v.tabIndex,D=k===void 0?0:k,w=v.selectable,s=v.showIcon,O=v.icon,M=v.switcherIcon,L=v.draggable,A=v.checkable,T=v.checkStrictly,I=v.disabled,_=v.motion,H=v.loadData,ne=v.filterTreeNode,ae=v.height,F=v.itemHeight,be=v.scrollWidth,ue=v.virtual,X=v.titleRender,fe=v.dropIndicatorRender,xe=v.onContextMenu,U=v.onScroll,we=v.direction,re=v.rootClassName,$e=v.rootStyle,Ce=kt(this.props,{aria:!0,data:!0}),oe;L&&(et(L)==="object"?oe=L:typeof L=="function"?oe={nodeDraggable:L}:oe={});var ve={prefixCls:y,selectable:w,showIcon:s,icon:O,switcherIcon:M,draggable:oe,draggingNodeKey:d,checkable:A,checkStrictly:T,disabled:I,keyEntities:a,dropLevelOffset:u,dropContainerKey:c,dropTargetKey:g,dropPosition:h,dragOverNodeKey:p,indent:b,direction:we,dropIndicatorRender:fe,loadData:H,filterTreeNode:ne,titleRender:X,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return x.createElement(tt.Provider,{value:ve},x.createElement("div",{className:V(y,K,re,C(C(C({},"".concat(y,"-show-line"),N),"".concat(y,"-focused"),l),"".concat(y,"-active-focused"),o!==null)),style:$e},x.createElement(zn,G({ref:this.listRef,prefixCls:y,style:m,data:f,disabled:I,selectable:w,checkable:!!A,motion:_,dragging:d!==null,height:ae,itemHeight:F,virtual:ue,focusable:E,focused:l,tabIndex:D,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:xe,onScroll:U,scrollWidth:be},this.getTreeNodeRequiredProps(),Ce))))}}],[{key:"getDerivedStateFromProps",value:function(i,l){var f=l.prevProps,a={prevProps:i};function d(D){return!f&&i.hasOwnProperty(D)||f&&f[D]!==i[D]}var o,u=l.fieldNames;if(d("fieldNames")&&(u=ke(i.fieldNames),a.fieldNames=u),d("treeData")?o=i.treeData:d("children")&&(ce(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),o=Dt(i.children)),o){a.treeData=o;var c=Ot(o,{fieldNames:u});a.keyEntities=q(C({},ye,Mt),c.keyEntities)}var g=a.keyEntities||l.keyEntities;if(d("expandedKeys")||f&&d("autoExpandParent"))a.expandedKeys=i.autoExpandParent||!f&&i.defaultExpandParent?Je(i.expandedKeys,g):i.expandedKeys;else if(!f&&i.defaultExpandAll){var h=q({},g);delete h[ye];var p=[];Object.keys(h).forEach(function(D){var w=h[D];w.children&&w.children.length&&p.push(w.key)}),a.expandedKeys=p}else!f&&i.defaultExpandedKeys&&(a.expandedKeys=i.autoExpandParent||i.defaultExpandParent?Je(i.defaultExpandedKeys,g):i.defaultExpandedKeys);if(a.expandedKeys||delete a.expandedKeys,o||a.expandedKeys){var b=Ve(o||l.treeData,a.expandedKeys||l.expandedKeys,u);a.flattenNodes=b}if(i.selectable&&(d("selectedKeys")?a.selectedKeys=ut(i.selectedKeys,i):!f&&i.defaultSelectedKeys&&(a.selectedKeys=ut(i.defaultSelectedKeys,i))),i.checkable){var v;if(d("checkedKeys")?v=Ge(i.checkedKeys)||{}:!f&&i.defaultCheckedKeys?v=Ge(i.defaultCheckedKeys)||{}:o&&(v=Ge(i.checkedKeys)||{checkedKeys:l.checkedKeys,halfCheckedKeys:l.halfCheckedKeys}),v){var y=v,K=y.checkedKeys,m=K===void 0?[]:K,N=y.halfCheckedKeys,E=N===void 0?[]:N;if(!i.checkStrictly){var k=We(m,!0,g);m=k.checkedKeys,E=k.halfCheckedKeys}a.checkedKeys=m,a.halfCheckedKeys=E}}return d("loadedKeys")&&(a.loadedKeys=i.loadedKeys),a}}]),r}(x.Component);C(at,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:In,allowDrop:function(){return!0},expandAction:!1});C(at,"TreeNode",Me);const qn=n=>{let{treeCls:t,treeNodeCls:r,directoryNodeSelectedBg:e,directoryNodeSelectedColor:i,motionDurationMid:l,borderRadius:f,controlItemBgHover:a}=n;return{[`${t}${t}-directory ${r}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${l}`,content:'""',borderRadius:f},"&:hover:before":{background:a}},[`${t}-switcher, ${t}-checkbox, ${t}-draggable-icon`]:{zIndex:1},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:i},[`${t}-node-content-wrapper`]:{color:i,background:"transparent","&:before, &:hover:before":{background:e}}}}}},Vn=new Ut("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),Wn=(n,t)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),Gn=(n,t)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${Ie(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),Un=(n,t)=>{const{treeCls:r,treeNodeCls:e,treeNodePadding:i,titleHeight:l,indentSize:f,nodeSelectedBg:a,nodeHoverBg:d,colorTextQuaternary:o,controlItemBgActiveDisabled:u}=t;return{[r]:Object.assign(Object.assign({},Ae(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${r}-rtl ${r}-switcher_close ${r}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${r}-active-focused)`]:Object.assign({},Et(t)),[`${r}-list-holder-inner`]:{alignItems:"flex-start"},[`&${r}-block-node`]:{[`${r}-list-holder-inner`]:{alignItems:"stretch",[`${r}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:Vn,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[e]:{display:"flex",alignItems:"flex-start",marginBottom:i,lineHeight:Ie(l),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:i},[`&-disabled ${r}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${r}-checkbox-disabled + ${r}-node-selected,&${e}-disabled${e}-selected ${r}-node-content-wrapper`]:{backgroundColor:u},[`${r}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${e}-disabled)`]:{[`${r}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${r}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${e}-disabled).filter-node ${r}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${r}-draggable-icon`]:{flexShrink:0,width:l,textAlign:"center",visibility:"visible",color:o},[`&${e}-disabled ${r}-draggable-icon`]:{visibility:"hidden"}}},[`${r}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:f}},[`${r}-draggable-icon`]:{visibility:"hidden"},[`${r}-switcher, ${r}-checkbox`]:{marginInlineEnd:t.calc(t.calc(l).sub(t.controlInteractiveSize)).div(2).equal()},[`${r}-switcher`]:Object.assign(Object.assign({},Wn(n,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:l,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:l,height:l,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${r}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${r}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(l).div(2).equal()).mul(.8).equal(),height:t.calc(l).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${r}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:l,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},Gn(n,t)),{"&:hover":{backgroundColor:d},[`&${r}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:a},[`${r}-iconEle`]:{display:"inline-block",width:l,height:l,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${r}-unselectable ${r}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${r}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(l).div(2).equal(),bottom:t.calc(i).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${r}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last ${r}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${Ie(t.calc(l).div(2).equal())} !important`}})}},Xn=function(n,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const e=`.${n}`,i=`${e}-treenode`,l=t.calc(t.paddingXS).div(2).equal(),f=Nt(t,{treeCls:e,treeNodeCls:i,treeNodePadding:l});return[Un(n,f),r&&qn(f)].filter(Boolean)},Yn=n=>{const{controlHeightSM:t,controlItemBgHover:r,controlItemBgActive:e}=n,i=t;return{titleHeight:i,indentSize:i,nodeHoverBg:r,nodeHoverColor:n.colorText,nodeSelectedBg:e,nodeSelectedColor:n.colorText}},Qn=n=>{const{colorTextLightSolid:t,colorPrimary:r}=n;return Object.assign(Object.assign({},Yn(n)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:r})},Jn=St("Tree",(n,t)=>{let{prefixCls:r}=t;return[{[n.componentCls]:Tt(`${r}-checkbox`,n)},Xn(r,n),Bt(n)]},Qn),yt=4;function Zn(n){const{dropPosition:t,dropLevelOffset:r,prefixCls:e,indent:i,direction:l="ltr"}=n,f=l==="ltr"?"left":"right",a=l==="ltr"?"right":"left",d={[f]:-r*i+yt,[a]:0};switch(t){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[f]=i+yt;break}return R.createElement("div",{style:d,className:`${e}-drop-indicator`})}const ea=n=>{const{prefixCls:t,switcherIcon:r,treeNodeProps:e,showLine:i,switcherLoadingIcon:l}=n,{isLeaf:f,expanded:a,loading:d}=e;if(d)return x.isValidElement(l)?l:x.createElement(Xt,{className:`${t}-switcher-loading-icon`});let o;if(i&&typeof i=="object"&&(o=i.showLeafIcon),f){if(!i)return null;if(typeof o!="boolean"&&o){const g=typeof o=="function"?o(e):o,h=`${t}-switcher-line-custom-icon`;return x.isValidElement(g)?dt(g,{className:V(g.props.className||"",h)}):g}return o?x.createElement(Rt,{className:`${t}-switcher-line-icon`}):x.createElement("span",{className:`${t}-switcher-leaf-line`})}const u=`${t}-switcher-icon`,c=typeof r=="function"?r(e):r;return x.isValidElement(c)?dt(c,{className:V(c.props.className||"",u)}):c!==void 0?c:i?a?x.createElement(Kn,{className:`${t}-switcher-line-icon`}):x.createElement(Sn,{className:`${t}-switcher-line-icon`}):x.createElement(ln,{className:u})},Lt=R.forwardRef((n,t)=>{var r;const{getPrefixCls:e,direction:i,virtual:l,tree:f}=R.useContext(wt),{prefixCls:a,className:d,showIcon:o=!1,showLine:u,switcherIcon:c,switcherLoadingIcon:g,blockNode:h=!1,children:p,checkable:b=!1,selectable:v=!0,draggable:y,motion:K,style:m}=n,N=e("tree",a),E=e(),k=K??Object.assign(Object.assign({},Yt(E)),{motionAppear:!1}),D=Object.assign(Object.assign({},n),{checkable:b,selectable:v,showIcon:o,motion:k,blockNode:h,showLine:!!u,dropIndicatorRender:Zn}),[w,s,O]=Jn(N),[,M]=Qt(),L=M.paddingXS/2+(((r=M.Tree)===null||r===void 0?void 0:r.titleHeight)||M.controlHeightSM),A=R.useMemo(()=>{if(!y)return!1;let I={};switch(typeof y){case"function":I.nodeDraggable=y;break;case"object":I=Object.assign({},y);break}return I.icon!==!1&&(I.icon=I.icon||R.createElement(bn,null)),I},[y]),T=I=>R.createElement(ea,{prefixCls:N,switcherIcon:c,switcherLoadingIcon:g,treeNodeProps:I,showLine:u});return w(R.createElement(at,Object.assign({itemHeight:L,ref:t,virtual:l},D,{style:Object.assign(Object.assign({},f==null?void 0:f.style),m),prefixCls:N,className:V({[`${N}-icon-hide`]:!o,[`${N}-block-node`]:h,[`${N}-unselectable`]:!v,[`${N}-rtl`]:i==="rtl"},f==null?void 0:f.className,d,s,O),direction:i,checkable:b&&R.createElement("span",{className:`${N}-checkbox-inner`}),selectable:v,switcherIcon:T,draggable:A}),p))}),mt=0,Ue=1,bt=2;function rt(n,t,r){const{key:e,children:i}=r;function l(f){const a=f[e],d=f[i];t(a,f)!==!1&&rt(d||[],t,r)}n.forEach(l)}function ta(n){let{treeData:t,expandedKeys:r,startKey:e,endKey:i,fieldNames:l}=n;const f=[];let a=mt;if(e&&e===i)return[e];if(!e||!i)return[];function d(o){return o===e||o===i}return rt(t,o=>{if(a===bt)return!1;if(d(o)){if(f.push(o),a===mt)a=Ue;else if(a===Ue)return a=bt,!1}else a===Ue&&f.push(o);return r.includes(o)},ke(l)),f}function Xe(n,t,r){const e=J(t),i=[];return rt(n,(l,f)=>{const a=e.indexOf(l);return a!==-1&&(i.push(f),e.splice(a,1)),!!e.length},ke(r)),i}var xt=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(n);i<e.length;i++)t.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(r[e[i]]=n[e[i]]);return r};function na(n){const{isLeaf:t,expanded:r}=n;return t?x.createElement(Rt,null):r?x.createElement(vn,null):x.createElement(pn,null)}function Ct(n){let{treeData:t,children:r}=n;return t||Dt(r)}const aa=(n,t)=>{var{defaultExpandAll:r,defaultExpandParent:e,defaultExpandedKeys:i}=n,l=xt(n,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]);const f=x.useRef(null),a=x.useRef(null),d=()=>{const{keyEntities:w}=Ot(Ct(l));let s;return r?s=Object.keys(w):e?s=Je(l.expandedKeys||i||[],w):s=l.expandedKeys||i||[],s},[o,u]=x.useState(l.selectedKeys||l.defaultSelectedKeys||[]),[c,g]=x.useState(()=>d());x.useEffect(()=>{"selectedKeys"in l&&u(l.selectedKeys)},[l.selectedKeys]),x.useEffect(()=>{"expandedKeys"in l&&g(l.expandedKeys)},[l.expandedKeys]);const h=(w,s)=>{var O;return"expandedKeys"in l||g(w),(O=l.onExpand)===null||O===void 0?void 0:O.call(l,w,s)},p=(w,s)=>{var O;const{multiple:M,fieldNames:L}=l,{node:A,nativeEvent:T}=s,{key:I=""}=A,_=Ct(l),H=Object.assign(Object.assign({},s),{selected:!0}),ne=(T==null?void 0:T.ctrlKey)||(T==null?void 0:T.metaKey),ae=T==null?void 0:T.shiftKey;let F;M&&ne?(F=w,f.current=I,a.current=F,H.selectedNodes=Xe(_,F,L)):M&&ae?(F=Array.from(new Set([].concat(J(a.current||[]),J(ta({treeData:_,expandedKeys:c,startKey:I,endKey:f.current,fieldNames:L}))))),H.selectedNodes=Xe(_,F,L)):(F=[I],f.current=I,a.current=F,H.selectedNodes=Xe(_,F,L)),(O=l.onSelect)===null||O===void 0||O.call(l,F,H),"selectedKeys"in l||u(F)},{getPrefixCls:b,direction:v}=x.useContext(wt),{prefixCls:y,className:K,showIcon:m=!0,expandAction:N="click"}=l,E=xt(l,["prefixCls","className","showIcon","expandAction"]),k=b("tree",y),D=V(`${k}-directory`,{[`${k}-directory-rtl`]:v==="rtl"},K);return x.createElement(Lt,Object.assign({icon:na,ref:t,blockNode:!0},E,{showIcon:m,expandAction:N,prefixCls:k,className:D,expandedKeys:c,selectedKeys:o,onSelect:p,onExpand:h}))},ra=x.forwardRef(aa),ot=Lt;ot.DirectoryTree=ra;ot.TreeNode=Me;const{Option:te}=Kt,Ye=({icon:n,color:t,onClick:r,title:e})=>$.jsx(Qe,{onClick:i=>{i.stopPropagation(),r()},size:"small",shape:"circle",style:{backgroundColor:t,color:"white",marginLeft:8},title:e,children:n}),oa=(n,t,r,e,i)=>{const l=new Map,f=[];return n.forEach(a=>{var u;const d=((u=a.locales.find(c=>c.language===t))==null?void 0:u.value)||a.name,o=$.jsxs("div",{className:"flex justify-between items-center",children:[$.jsx("span",{children:d}),$.jsxs("div",{className:"ml-2 flex items-center",children:[$.jsx(Ye,{icon:"+",color:"#52c41a",onClick:()=>r(a._id),title:"Add subcategory"}),$.jsx(Ye,{icon:"-",color:"#ff4d4f",onClick:()=>e(a._id),title:"Delete category"}),$.jsx(Ye,{icon:"✎",color:"#1890ff",onClick:()=>i(a._id),title:"Edit category"})]})]});l.set(a._id,{key:a._id.toString(),title:o,children:[],raw:a})}),n.forEach(a=>{const d=l.get(a._id);a.parentId&&l.has(Number(a.parentId))?l.get(Number(a.parentId)).children.push(d):f.push(d)}),f};function sa(){const n=jt(),{data:t}=_t({page:1,limit:1500}),[r,e]=x.useState("en"),[i,l]=x.useState(null),f=c=>{n(`/categories-crud/create/${c}`)},a=async c=>{n(`/categories-crud/delete/${c}`)},d=c=>{n(`/categories-crud/edit/${c}`)},o=oa((t==null?void 0:t.responseObject.categories)||[],r,f,a,d),u=(c,g)=>{const h=g.node;l(h.raw)};return t?$.jsxs("div",{className:"bg-white shadow-md rounded-md w-full flex p-4 gap-4 h-full h-full",children:[$.jsxs("div",{className:"border-r pr-4 w-1/3 overflow-y-auto",children:[$.jsx("h2",{className:"font-bold mb-2",children:"Categories"}),$.jsxs("div",{className:"mb-4",children:[$.jsx("label",{htmlFor:"language",className:"block text-sm font-medium mb-1",children:"Language:"}),$.jsxs(Kt,{id:"language",value:r,onChange:e,className:"w-full",children:[$.jsx(te,{value:"ua",children:"Ukrainian"}),$.jsx(te,{value:"es",children:"Spanish"}),$.jsx(te,{value:"en",children:"English"}),$.jsx(te,{value:"ru",children:"Russian"}),$.jsx(te,{value:"fr",children:"French"}),$.jsx(te,{value:"de",children:"German"}),$.jsx(te,{value:"it",children:"Italian"}),$.jsx(te,{value:"pl",children:"Polish"}),$.jsx(te,{value:"tr",children:"Turkish"})]})]}),$.jsx(ot,{treeData:o,onSelect:u,showLine:{showLeafIcon:!1}})]}),$.jsxs("div",{className:"flex-grow max-w-2xl flex flex-col gap-4",children:[$.jsx("h3",{className:"font-bold",children:"Selected Category:"}),i?$.jsxs("div",{className:"space-y-3",children:[$.jsxs("div",{className:"text-gray-700",children:[$.jsx("strong",{children:"ID:"})," ",i._id]}),$.jsxs("div",{className:"text-gray-700",children:[$.jsx("strong",{children:"Default name:"})," ",i.name]}),$.jsx("h4",{className:"font-semibold mt-2",children:"Locales:"}),$.jsxs($.Fragment,{children:[i.locales.map(c=>$.jsxs("div",{className:"flex gap-2 items-center",children:[$.jsxs("label",{className:"w-[100px] text-sm font-medium",children:[c.language.toUpperCase(),":"]}),$.jsx("span",{className:"w-full block px-2 py-1 border rounded bg-gray-50",children:c.value||$.jsx("span",{className:"text-gray-400 italic",children:"No value"})})]},c.language)),$.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[$.jsx(Qe,{type:"primary",onClick:()=>n(`/categories-crud/edit/${i._id}`),children:"Edit"}),$.jsx(Qe,{danger:!0,type:"primary",onClick:()=>n(`/categories-crud/delete/${i._id}`),children:"Delete"})]})]})]}):$.jsx("span",{children:"No category selected. Please select one."})]})]}):$.jsx("div",{className:"flex items-center justify-center h-full",children:$.jsx("p",{children:"Loading..."})})}export{sa as default};
