import{a as M,b as P,x as E,y as D,z as T,A as z,B as I,C as L,r as m,j as e,D as O,E as _,F as B,G as F,H as j,I as G}from"./index-JQf8uTBS.js";import{L as W}from"./Loader-O6efTDbk.js";import{M as $,P as J}from"./MapWithMarker-CZeXoSMq.js";const X=()=>{const f=M(),a=P(),[N]=E(),[v]=D(),[w]=T(),[Q]=z(),{limit:d,page:t,totalPages:x,difficulty:p,type:u,title:h,status:b}=I(),{data:l,isLoading:k,error:i,refetch:y}=L({limit:d,page:t,difficulty:p,type:u,title:h,status:b}),[n,c]=m.useState(new Set),C=s=>{c(r=>{const o=new Set(r);return o.has(s)?o.delete(s):o.add(s),o})},g=m.useRef(!0);m.useEffect(()=>{g.current||y(),g.current=!1},[d,t,p,u,h,y]);const S=()=>{N(Array.from(n)),c(new Set)},A=()=>{w(Array.from(n)),c(new Set)};return k?e.jsx(W,{}):i?e.jsxs("p",{children:["Error:"," ",i&&"data"in i?i.data.message:"An error occurred"]}):e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-md shadow-md flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Difficulty"}),e.jsxs("select",{value:p,onChange:s=>a(O(s.target.value)),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"1",children:"1 (Easy)"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3 (Medium)"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"5",children:"5 (Hard)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Type"}),e.jsxs("select",{value:u,onChange:s=>a(_(s.target.value)),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"map",children:"Map"}),e.jsx("option",{value:"choice",children:"One Choice"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Question Title"}),e.jsx("input",{type:"text",value:h,onChange:s=>a(B(s.target.value)),className:"w-full p-2 border rounded-md",placeholder:"Enter question title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Status"}),e.jsxs("select",{value:b,onChange:s=>a(F(s.target.value)),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"proof_reading",children:"Proof Reading"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),n.size>0&&e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsx("button",{className:"bg-green-500 text-white px-3 py-1 rounded-md",onClick:S,children:"Accept Selected"}),e.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded-md",onClick:A,children:"Reject Selected"})]}),e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-300 bg-white shadow-md rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:e.jsx("input",{type:"checkbox",onChange:s=>{s.target.checked?c(new Set(l==null?void 0:l.responseObject.questions.map(r=>r._id))):c(new Set)},checked:n.size===(l==null?void 0:l.responseObject.questions.length)})}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"ID"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Question"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Answers"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Difficulty"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Type"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),e.jsx("tbody",{children:l==null?void 0:l.responseObject.questions.map(s=>{var o;const r=s._id;return e.jsxs("tr",{className:"hover:bg-gray-100",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:e.jsx("input",{type:"checkbox",checked:n.has(r),onChange:()=>C(r)})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:r}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:s.locales[0].question}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 w-1/4",children:s.type==="map"?e.jsx($,{position:[Number(s.locales[0].correct[0]),Number(s.locales[0].correct[1])]}):e.jsxs("ul",{className:"list-none grid grid-cols-2 gap-4",children:[e.jsxs("li",{className:"font-bold text-green-600",children:["✔ ",s.locales[0].correct]}),(o=s.locales[0].wrong)==null?void 0:o.map((H,R)=>e.jsxs("li",{children:["✗ ",H]},R))]})}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:s.difficulty}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:s.status}),e.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center",children:s.type.replace("_"," ")}),e.jsxs("td",{className:"border border-gray-300 px-4 py-2 flex items-center justify-center space-x-2",children:[e.jsx("button",{className:"bg-orange-500 text-white px-3 py-1 rounded-md",onClick:()=>v(r),children:"Accept"}),e.jsx("button",{className:"bg-red-500 text-white px-3 py-1 rounded-md",onClick:()=>Q(r),children:"Reject"}),e.jsx(J,{size:22,className:"text-gray-600 cursor-pointer hover:text-black",onClick:()=>f(`/edit-question/${r}`)})]})]},r)})})]})}),e.jsxs("div",{className:"flex space-x-4 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",onClick:()=>a(j(t>1?t-1:1)),disabled:t===1,children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-lg font-semibold",children:["Page ",t," of ",x||1]}),e.jsx("button",{className:"px-4 py-2 bg-gray-300 rounded disabled:opacity-50",onClick:()=>a(j(t<x?t+1:1)),disabled:t>=x,children:"Next"}),e.jsxs("div",{className:"px-4 py-2 bg-gray-300 rounded",children:[e.jsx("span",{children:"Items per page:"}),e.jsxs("select",{value:d,onChange:s=>{a(G(+s.target.value)),a(j(1))},className:"px-4 py-2 bg-gray-300 rounded",children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"5",children:"5"}),e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"})]})]})]})]})};export{X as default};
