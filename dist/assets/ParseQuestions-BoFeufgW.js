import{r as h,a1 as y,c as E,b as T,d as b,j as e,e as w,f,g as j,N as C}from"./index-RqZR_ZIX.js";import{Q as v,C as R,I as u,E as L,T as N}from"./TokensUsed-CHrSxJ7g.js";const _={category:null,boilerplateText:"",type:v.OneChoice,language:"en",error:null,isGenerated:!1,tokensUsed:0},k=(t,r)=>{switch(r.type){case"SET_VALUE":return{...t,[r.field]:r.value};case"SET_ERROR":return{...t,error:r.error};case"CLEAR_BOILERPLATE_TEXT":return{...t,boilerplateText:""};case"SET_IS_GENERATED":return{...t,isGenerated:r.isGenerated};default:return t}},A=()=>{const[t,r]=h.useReducer(k,_),[g,{isLoading:n}]=y(),{page:c,limit:d,title:p,totalPages:x}=E(),l=T(),{data:o}=b({page:c,limit:d,title:p},{refetchOnMountOrArgChange:!0}),i=(s,a)=>{r({type:"SET_VALUE",field:s,value:a})},m=async()=>{var s;if(!t.boilerplateText.trim()){r({type:"SET_ERROR",error:"Boilerplate text cannot be empty"});return}try{const a=await g({boilerplateText:t.boilerplateText,categoryId:((s=t.category)==null?void 0:s._id)||"",language:t.language,type:t.type}).unwrap();r({type:"SET_IS_GENERATED",isGenerated:!0}),r({type:"CLEAR_BOILERPLATE_TEXT"}),r({type:"SET_ERROR",error:null}),r({type:"SET_VALUE",field:"tokensUsed",value:a.responseObject.totalTokensUsed})}catch(a){r({type:"SET_ERROR",error:"Failed to parse questions"}),console.error(a)}};return e.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 p-6",children:[e.jsx("div",{className:"bg-white shadow-md rounded-md p-6 w-full max-w-3xl",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold",children:"Category"}),e.jsx(R,{categories:(o==null?void 0:o.responseObject.categories)||[],selectedCategory:t.category,setSelectedCategory:s=>i("category",s),handleLimitChange:s=>l(j(s)),handlePageChange:s=>l(f(s)),handleTitleChange:s=>l(w(s)),page:c,limit:d,totalPages:x,title:p})]}),e.jsx(u,{label:"Language",name:"language",type:"select",value:t.language,selectOptions:["en","es","fr","de","uk","zh"],onChange:s=>i("language",s)}),e.jsx(u,{label:"Type",name:"type",type:"select",value:t.type,selectOptions:["choice","map"],onChange:s=>i("type",s)})]})}),e.jsx("div",{className:"mt-6 w-full max-w-3xl",children:e.jsx("div",{className:"border border-gray-400 p-4 flex justify-between items-center bg-white rounded-md",children:e.jsx("textarea",{rows:10,style:{resize:"none"},value:t.boilerplateText,onChange:s=>r({type:"SET_VALUE",field:"boilerplateText",value:s.target.value}),placeholder:"Enter your prompt...",className:"w-full p-2 border-none outline-none bg-transparent text-black"})})}),e.jsxs("button",{onClick:m,className:`text-white p-2 rounded-md flex items-center gap-2 mt-4 ${n?"bg-gray-400":"bg-blue-500"}`,disabled:n,children:["Generate",n?e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}):null]}),e.jsx(L,{error:t.error??""}),e.jsx(N,{tokensUsed:t.tokensUsed}),t.isGenerated&&e.jsxs(C,{to:"/generated-questions",className:"bg-orange-500 text-white text-md font-semibold px-6 py-2 rounded-md mt-4 flex items-center gap-2",children:["View Questions",e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})};export{A as default};
