import{c as h,b as x,d as y,j as t,e as f,f as b,g as E,r as j,h as C,N as T}from"./index-Cqs9DpvL.js";import{C as v,I as u,Q as N,E as w,T as S}from"./TokensUsed-DdF11ZQj.js";const R=({state:e,dispatch:r})=>{const{page:a,limit:o,title:d,totalPages:c}=h(),n=x(),{data:p}=y({page:a,limit:o,title:d},{refetchOnMountOrArgChange:!0}),l=(s,i)=>{r({type:"SET_VALUE",field:s,value:i})},g=s=>{const i=e.requiredLanguages.includes(s)?e.requiredLanguages.filter(m=>m!==s):[...e.requiredLanguages,s];i.length===0&&i.push("en"),r({type:"SET_VALUE",field:"requiredLanguages",value:i})};return t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"font-semibold",children:"Category"}),t.jsx(v,{categories:(p==null?void 0:p.responseObject.categories)||[],selectedCategory:e.category,setSelectedCategory:s=>l("category",s),handleLimitChange:s=>n(E(s)),handlePageChange:s=>n(b(s)),handleTitleChange:s=>n(f(s)),page:a,limit:o,totalPages:c,title:d})]}),t.jsx(u,{label:"Count",name:"count",type:"number",value:e.count,onChange:l}),t.jsx(u,{label:"Temperature",name:"temperature",type:"number",value:e.temperature,onChange:l,options:{min:0,max:2,step:.1}}),t.jsx(u,{label:"Difficulty",name:"difficulty",type:"select",value:e.difficulty,selectOptions:[1,2,3,4,5],onChange:l}),t.jsx(u,{label:"Type",name:"type",type:"select",value:e.type,selectOptions:["choice","map"],onChange:l}),t.jsx(u,{label:"Model",name:"model",type:"select",value:e.model,selectOptions:["gpt-3.5-turbo","gpt-4-turbo","gpt-4","gpt-4o","gpt-4o-mini","o1","o1-mini","o3","o3-mini","gpt-4.5","gpt-5"],onChange:l}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("label",{className:"font-semibold",children:"Required Locales"}),t.jsx("div",{className:"grid grid-cols-6 gap-2",children:["en","es","fr","de","uk","zh"].map(s=>t.jsxs("label",{className:"flex items-center space-x-2",children:[t.jsx("input",{type:"checkbox",checked:e.requiredLanguages.includes(s),onChange:()=>g(s),className:"rounded border-gray-400 text-blue-500 focus:ring-2 focus:ring-blue-400"}),t.jsx("span",{children:s})]},s))})]})]})},L={category:null,prompt:"",count:5,questions:[],tokensUsed:0,temperature:.5,difficulty:3,type:N.OneChoice,model:"gpt-4o",requiredLanguages:["en","es","fr","de","uk","zh"],error:null,isGenerated:!1},_=(e,r)=>{switch(r.type){case"SET_VALUE":return{...e,[r.field]:r.value};case"SET_QUESTIONS":return{...e,questions:r.questions,error:null};case"SET_TOKENS_USED":return{...e,tokensUsed:r.tokensUsed};case"SET_ERROR":return{...e,error:r.error};case"CLEAR_PROMPT":return{...e,prompt:""};case"SET_IS_GENERATED":return{...e,isGenerated:r.isGenerated};default:return e}},k=({state:e,dispatch:r})=>t.jsx("div",{className:"mt-6 w-full max-w-3xl",children:t.jsx("div",{className:"border border-gray-400 p-4 flex justify-between items-center bg-white rounded-md",children:t.jsx("input",{type:"text",value:e.prompt,onChange:a=>r({type:"SET_VALUE",field:"prompt",value:a.target.value}),placeholder:"Enter your prompt...",className:"w-full p-2 border-none outline-none bg-transparent text-black"})})}),q=()=>{const[e,r]=j.useReducer(_,L),[a,{isLoading:o}]=C(),d=async()=>{var c;if(!e.prompt.trim()){r({type:"SET_ERROR",error:"Prompt cannot be empty"});return}try{const n=await a({prompt:e.prompt,difficulty:+e.difficulty,count:e.count,category:(c=e.category)==null?void 0:c._id,temperature:e.temperature,type:e.type,model:e.model,requiredLanguages:e.requiredLanguages}).unwrap();r({type:"SET_IS_GENERATED",isGenerated:!0}),r({type:"SET_TOKENS_USED",tokensUsed:n.responseObject.totalTokensUsed}),r({type:"CLEAR_PROMPT"}),r({type:"SET_ERROR",error:null})}catch(n){r({type:"SET_ERROR",error:"Failed to generate questions"}),console.error(n)}};return t.jsxs("div",{className:"flex flex-col items-center justify-center bg-gray-100 p-6",children:[t.jsx("div",{className:"bg-white shadow-md rounded-md p-6 w-full max-w-3xl",children:t.jsx(R,{state:e,dispatch:r})}),t.jsx(k,{state:e,dispatch:r}),t.jsxs("button",{onClick:d,className:`text-white p-2 rounded-md flex items-center gap-2 mt-4 ${o?"bg-gray-400":"bg-blue-500"}`,disabled:o,children:["Generate",o?t.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8z"})]}):null]}),t.jsx(w,{error:e.error}),t.jsx(S,{tokensUsed:e.tokensUsed}),e.isGenerated&&t.jsx(T,{to:"/generated-questions",className:"bg-orange-500 text-white text-md font-semibold px-6 py-2 rounded-md mt-4",children:"View Questions"})]})};export{q as default};
